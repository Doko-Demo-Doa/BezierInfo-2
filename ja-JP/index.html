<!DOCTYPE html>
<html lang="ja-JP">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ベジェ曲線入門</title>
    <link rel="shortcut icon" href="favicon.png" type="image/png" />

    <base href=".." />

    <!-- And a slew of SEO related meta elements, because being discoverable is important -->
    <meta
      name="description"
      content="A detailed explanation of Bézier curves, and how to do the many things that we commonly want to do with them."
    />

    <!-- opengraph information -->
    <meta property="og:title" content="ベジェ曲線入門" />
    <meta
      property="og:image"
      content="https://pomax.github.io/bezierinfo/images/og-image.png"
    />
    <meta property="og:type" content="text" />
    <meta property="og:url" content="https://pomax.github.io/bezierinfo" />
    <meta
      property="og:description"
      content="A detailed explanation of Bézier curves, and how to do the many things that we commonly want to do with them."
    />
    <meta property="og:locale" content="ja-JP}}" />
    <meta property="og:type" content="article" />
    <meta property="og:published_time" content="2013-06-13 12:00:00" />
    <meta property="og:author" content="Mike 'Pomax' Kamermans" />
    <meta property="og:section" content="Bézier Curves" />
    <meta property="og:tag" content="Bézier Curves" />

    <!-- twitter card information -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@TheRealPomax" />
    <meta name="twitter:creator" content="@TheRealPomax" />
    <meta
      name="twitter:image"
      content="https://pomax.github.io/bezierinfo/images/og-image.png"
    />
    <meta name="twitter:url" content="https://pomax.github.io/bezierinfo" />
    <meta
      name="twitter:description"
      content="A detailed explanation of Bézier curves, and how to do the many things that we commonly want to do with them."
    />

    <!-- my own referral/page hit tracker, because Google knows enough -->
    <script src="./lib/site/referrer.js" type="module" async></script>

    <!-- the part that makes interactive graphics work: an HTML5 <graphics-element> custom element -->
    <script
      src="./lib/custom-element/graphics-element.js"
      type="module"
      async
      defer
    ></script>
    <link rel="stylesheet" href="./lib/custom-element/graphics-element.css" />

    <!-- page styling -->
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header>
      <h1>ベジェ曲線入門</h1>
      <h2>
        A free, online book for when you really need to know how to do Bézier
        things.
      </h2>
      <span>Read this in your own language:</span>
      <ul>
        <li><a href="./index.html">English</a></li>
        <li><a href="./ja-JP/index.html">日本語</a></li>
        <li><a href="./zh-CN/index.html">中文</a></li>
      </ul>
      <span
        >Don't see your language listed?
        <a href="https://github.com/Pomax/BezierInfo-2/wiki/localize"
          >Help translate this content!</a
        ></span
      >
      <nav aria-labelledby="toc">
        <h1 id="toc">目次</h1>
        <li><a href="#introduction">バッとした導入</a></li>
        <li>
          <a href="#whatis">ではベジエ曲線はどうやってできるのでしょう？</a>
        </li>
      </nav>
    </header>

    <main>
      <section id="preface">
        <section id="preface">
          <h1>まえがき</h1>
          <p>
            2次元上になにかを描くとき、普通は線を使いますが、これは直線と曲線の2つに分類することができます。直線を描くのはとても簡単で、これをコンピュータに描かせるのも容易です。直線の始点と終点をコンピュータに与えてやれば、ポン！直線が描けました。疑問の余地もありません。
          </p>
          <p>
            しかしながら、曲線の方はもっと大きな問題です。私たちはフリーハンドでいとも簡単に曲線を描くことができますが、コンピュータの方は少し不利です。曲線の描き方を表した数学的な関数が与えられないと、コンピュータは曲線を描くことができないのです。実際には、直線でさえも関数が必要になります。直線の関数はとても簡単なので、わたしたちはよく無視してしまいますが、コンピュータにとっては直線であれ曲線であれ、線はすべて「関数」なのです。しかしこれは、コンピュータで速く計算できて、きれいな曲線が得られるような関数を見つける必要がある、ということになります。そのような関数はたくさんありますが、多くの関心を集め続け、そしてどんな場面でも使われている、ある特定の関数に対してこの記事では焦点を絞ります。この関数は「ベジエ」曲線を描きます。
          </p>
          <p>
            ベジエ曲線は<a
              href="https://ja.wikipedia.org/wiki/%E3%83%94%E3%82%A8%E3%83%BC%E3%83%AB%E3%83%BB%E3%83%99%E3%82%B8%E3%82%A7"
              >Pierre Bézier</a
            >から名付けられました。この曲線がデザイン作業に適していることを世界に知らしめたのが、彼なのです（ルノーに勤務し、1962年にその研究を発表しました）。ただし、この曲線を「発明」したのは彼が最初で唯一というわけではありません。数学者<a
              href="https://en.wikipedia.org/wiki/Paul_de_Casteljau"
              >Paul de Casteljau</a
            >はシトロエンで働いていた1959年、この曲線の性質について研究し、ベジエ曲線の非常にエレガントな描き方を発見しました。これが最初だと言う人もいます。しかしながら、de
            Casteljauは自分の成果を発表しなかったため、「誰が最初か？」という問いに答えるのがとても難しくなっています。またベジエ曲線は、核心的には<a
              href="https://ja.wikipedia.org/wiki/%E3%82%BB%E3%83%AB%E3%82%B2%E3%82%A4%E3%83%BB%E3%83%99%E3%83%AB%E3%83%B3%E3%82%B7%E3%83%A5%E3%83%86%E3%82%A4%E3%83%B3"
              >Sergei Natanovich Bernstein</a
            >が研究した「ベルンシュタイン多項式」という数学関数の一種ですが、こちらの公刊に関しては少なくとも1912年まで遡ることができます。いずれにせよ、これらはほとんど瑣末なことです。より注目すべきなのは、ベジエ曲線は取り扱いに便利だいうことです。たとえば複数のベジエ曲線を繋いで、1つの曲線に見えるようにすることができます。もしあなたがPhotoshopで「パス」を描いたり、FlashやIllustrator、Inkscapeのようなベクタードローイングソフトを使ったことがあるのであれば、そこで描いてきた曲線はベジエ曲線です。
          </p>
          <p>
            では、これを自分でプログラムしなければならないとなったらどうでしょう？ハマりどころは何でしょうか？どうやってベジエ曲線を描くのでしょう？バウンディングボックスとは何で、どうやって交点を求め、どうやったら曲線を押し出せるのでしょうか？つまるところ、ベジエ曲線に対して行いたいあらゆる操作は、どのようにすればいいのでしょう？このページはそれに答えるためにあります。数学にとりかかりましょう！
          </p>
          <div className="print">
            ## 追伸：コーヒーをおごってくれませんか？

            <p>
              この本のことを印刷するほど気に入ったのであれば、あなたは「何かお礼をする方法はないか」と考えているかもしれません。この質問に対する答えはこうです：いつでもわたしにコーヒーをおごってください。あなたが住んでいるところの、コーヒー1杯の値段でかまいません。この本にかなりの金額を支払いたいのであれば、非常に高価なコーヒーをおごってくれてもかまいません
              =)
            </p>
            <p>
              この本は小さな入門からはじまり、印刷85ページ以上に相当するようなベジエ曲線の電子書籍へと、年々成長してきています。そして、多くのコーヒーがその執筆に費やされてきました。わたしは執筆に使った時間が惜しいとは思いませんが、もう少しコーヒーがあれば、ずっと書き続けることができるのです！<a
                href="https://pomax.github.io/bezierinfo%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6%E3%82%AA%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%B3%E7%89%88%E3%81%AE%E3%81%BE%E3%81%88%E3%81%8C%E3%81%8D%E3%81%AB%E3%81%82%E3%82%8B%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%92%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF%E3%81%97%E3%80%81%E3%82%B3%E3%83%BC%E3%83%92%E3%83%BC%E4%BB%A3%E3%82%92%E5%AF%84%E4%BB%98%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%E3%80%82"
                >https://pomax.github.io/bezierinfoにアクセスしてオンライン版のまえがきにあるリンクをクリックし、コーヒー代を寄付してください。</a
              >
            </p>
          </div>

          <p>
            —Pomax (Twitter上では<a href="https://twitter.com/TheRealPomax"
              >@TheRealPomax</a
            >)
          </p>
          <div className="note">
            <h2>注：ベジエの図はすべてインタラクティブになっています。</h2>
            <p>
              このページでは<a href="http://pomax.github.io/bezierjs"
                >Bezier.js</a
              >を活用し、インタラクティブな例示を行っています。また、<a
                href="http://mathjax.org"
                >MathJax</a
              >というすばらしいライブラリによって、（LaTeX式の）「本物」の数学組版を行っています。このページはWebpackを使い、Reactアプリケーションとしてオフラインで生成されていますが、このために「ソースを表示」オプションを追加することがかなり難しくなってしまいました。これをどうやって追加すべきかは今もまだ考え中ですが、かといって、数年ぶりとなる今回の更新を延期したくはありませんでした。
            </p>
            <h2>本書はオープンソースです。</h2>
            <p>
              この本はオープンソースソフトウェアのプロジェクトで、2つのGitHubリポジトリ上に存在しています。1つ目の<a
                href="https://github.com/pomax/bezierinfo"
                >https://github.com/pomax/bezierinfo</a
              >は表示のためだけに用意されたバージョンで、あなたが今読んでいるものです。もう一方の<a
                href="https://github.com/pomax/BezierInfo-2"
                >https://github.com/pomax/BezierInfo-2</a
              >は開発版で、すべてのHTML・JavaScript・CSSが含まれています。どちらのリポジトリもフォークすることができますし、あなたの好きなように使ってかまいません。ただし、これを自分の成果だと騙って売ることはもちろん除きます。=)
            </p>
            <h2>数学はどこまで難しくなりますか？</h2>
            <p>
              この入門に出てくる数学は、大半が高校初年度程度です。基本的な計算を理解していて、英語の読み方が分かっていれば、こなすことができるはずです。時には<em>ずっと</em>難しい数学も出てきますが、もし理解できないように感じたら、そこは読み飛ばしても大丈夫です。節の中の「詳細欄」を飛ばしてもいいですし、厄介そうな数学があれば節の最後まで読み飛ばしてもかまいません。各節の最後にはたいてい結論を並べてありますので、これを直に利用することもできます。
            </p>
            <h2>質問・コメント：</h2>
            <p>
              新しい節の提案があれば、<a
                href="https://github.com/pomax/BezierInfo-2/issues"
                >GitHubのissueトラッカー</a
              >をクリックしてください（右上にあるリポジトリのリンクからでもたどり着けます）。改訂中のため、現在はこのページにはコメント欄がありませんが、内容に関する質問がある場合にもissueトラッカーを使ってかまいません。改訂が完了したら、総合的なコメント欄を復活させる予定です。あるいは、「質問対象の節を選択して『質問』ボタンをクリック」するような項目別のシステムになるかもしれません。いずれわかります。
            </p>
            <h2>コーヒーをおごってくれませんか？</h2>
            <p>
              この本が気に入った場合や、取り組んでいたことに役に立つと思った場合、あるいは、この本への感謝をわたしに伝えるにはどうすればいいのかわからない場合。そのような場合には、<a
                href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=QPRDLNGDANJSW"
                >わたしにコーヒーをおごってください</a
              >。あなたが住んでいるところのコーヒー1杯の値段でかまいません。この本は小さな入門からはじまり、印刷で70ページほどに相当するようなベジエ曲線の読み物へと、年々成長してきています。そして、多くのコーヒーが執筆に費やされてきました。わたしは執筆に使った時間が惜しいとは思いませんが、もう少しコーヒーがあれば、ずっと書き続けることができるのです！
            </p>
          </div>
        </section>
      </section>

      <section id="changelog">
        <h1>What's new?</h1>
        <p>
          This primer is a living document, and so depending on when you last
          look at it, there may be new content. Click the following link to
          expand this section to have a look at what got added, when.
        </p>
        <section>
          <h2>August 2020</h2>
          <ul>
            <li>
              Completely redid all the code for the site, except for chapter
              text: the Primer is now finally a normal web page again.
            </li>
          </ul>
          <h2>June 2020</h2>
          <ul>
            <li>Added automatic CI/CD using Github Actions</li>
          </ul>
          <h2>January 2020</h2>
          <ul>
            <li>Added reset buttons to all graphics</li>
            <li>Updated to preface to correctly describe the on-page maths</li>
            <li>
              Fixed the Catmull-Rom section because it had glaring maths errors
            </li>
          </ul>
          <h2>August 2019</h2>
          <ul>
            <li>Added a section on (plain) rational Bezier curves</li>
            <li>Improved the Graphic component to allow for sliders</li>
          </ul>
          <h2>December 2018</h2>
          <ul>
            <li>Added a section on curvature and calculating kappa.</li>
            <li>
              Added a Patreon page! Head on over to
              https://patreon.com/bezierinfo to help support this site!
            </li>
          </ul>
          <h2>August 2018</h2>
          <ul>
            <li>
              Added a section on finding a curve's y, if all you have is the x
              coordinate.
            </li>
          </ul>
          <h2>July 2018</h2>
          <ul>
            <li>
              Rewrote the 3D normals section, implementing and explaining
              Rotation Minimising Frames.
            </li>
            <li>
              Updated the section on curve order raising/lowering, showing how
              to get a least-squares optimized lower order curve.
            </li>
            <li>
              (Finally) updated 'npm test' so that it automatically rebuilds
              when files are changed while the dev server is running.
            </li>
          </ul>
          <h2>June 2018</h2>
          <ul>
            <li>Added a section on direct curve fitting.</li>
            <li>Added source links for all graphics.</li>
            <li>Added this "What's new?" section.</li>
          </ul>
          <h2>April 2017</h2>
          <ul>
            <li>Added a section on 3d normals.</li>
            <li>
              Added live-updating for the social link buttons, so they always
              link to the specific section you're reading.
            </li>
          </ul>
          <h2>February 2017</h2>
          <ul>
            <li>Finished rewriting the entire codebase for localization.</li>
          </ul>
          <h2>January 2016</h2>
          <ul>
            <li>Added a section to explain the Bezier interval.</li>
            <li>Rewrote the Primer as a React application.</li>
          </ul>
          <h2>December 2015</h2>
          <ul>
            <li>
              Set up the split repository between BezierInfo-2 as development
              repository, and bezierinfo as live page.
            </li>
            <li>
              Removed the need for client-side LaTeX parsing entirely, so the
              site doesn't take a full minute or more to load all the graphics.
            </li>
          </ul>
          <h2>May 2015</h2>
          <ul>
            <li>
              Switched over to pure JS rather than
              Processing-through-Processing.js
            </li>
            <li>
              Added Cardano's algorithm for finding the roots of a cubic
              polynomial.
            </li>
          </ul>
          <h2>April 2015</h2>
          <ul>
            <li>Added a section on arc length approximations.</li>
          </ul>
          <h2>February 2015</h2>
          <ul>
            <li>Added a section on the canonical cubic Bezier form.</li>
          </ul>
          <h2>November 2014</h2>
          <ul>
            <li>Switched to HTTPS.</li>
          </ul>
          <h2>July 2014</h2>
          <ul>
            <li>Added the section on arc approximation.</li>
          </ul>
          <h2>April 2014</h2>
          <ul>
            <li>Added the section on Catmull-Rom fitting.</li>
          </ul>
          <h2>November 2013</h2>
          <ul>
            <li>Added the section on Catmull-Rom / Bezier conversion.</li>
            <li>Added the section on Bezier cuves as matrices</li>
          </ul>
          <h2>April 2013</h2>
          <ul>
            <li>Added a section on poly-Beziers.</li>
            <li>Added a section on boolean shape operations.</li>
          </ul>
          <h2>March 2013</h2>
          <ul>
            <li>First drastic rewrite</li>
            <li>Added sections on circle approximations.</li>
            <li>Added a section on projecting a point onto a curve.</li>
            <li>Added a section on tangents and normals.</li>
            <li>Added Legendre-Gauss numerical data tables.</li>
          </ul>
          <h2>October 2011</h2>
          <ul>
            <li>
              First commit for the https://pomax.github.io/bezierinfo site,
              based on the pre-Primer webpage that covered the basics of Bezier
              curves in HTML with Processing.js examples.
            </li>
          </ul>
        </section>
      </section>

      <section id="chapters">
        <section id="introduction">
          <h1>バッとした導入</h1>
          <p>
            まずは良い例から始めましょう。ベジエ曲線というのは、下の図に表示されているもののことです。ベジエ曲線はある始点からある終点へと延びており、その曲率は1個以上の「中間」制御点に左右されています。さて、このページの図はどれもインタラクティブになっていますので、ここで曲線をちょっと操作してみましょう。点をドラッグしたとき、曲線の形がそれに応じてどう変化するのか、確かめてみてください。
          </p>
          <div class="figure">
            <graphics-element
              title="2次のベジエ曲線"
              width="275"
              height="275"
              src="./chapters/introduction/quadratic.js"
            >
              <fallback-image>
                <img
                  width="275"
                  height="275"
                  src="./chapters/introduction/quadratic.png"
                  loading="lazy"
                />
                Scripts are disabled. Showing fallback image.
              </fallback-image></graphics-element
            >
            <graphics-element
              title="3次のベジエ曲線"
              width="275"
              height="275"
              src="./chapters/introduction/cubic.js"
            >
              <fallback-image>
                <img
                  width="275"
                  height="275"
                  src="./chapters/introduction/cubic.png"
                  loading="lazy"
                />
                Scripts are disabled. Showing fallback image.
              </fallback-image></graphics-element
            >
          </div>

          <p>
            ベジエ曲線は、CAD（computer aided designやCAM（computer aided
            manufacturing）のアプリケーションで多用されています。もちろん、Adobe
            Illustrator・Photoshop・Inkscape・Gimp
            などのグラフィックデザインアプリケーションや、SVG（scalable vector
            graphics）・OpenTypeフォント（otf/ttf）のようなグラフィック技術でも利用されています。ベジエ曲線はたくさんのものに使われていますので、これについてもっと詳しく学びたいのであれば……さあ、準備しましょう！
          </p>
        </section>
        <section id="whatis">
          <h1>ではベジエ曲線はどうやってできるのでしょう？</h1>
          <p>
            ベジエ曲線がどのように動くのか、点を触ってみて感覚が摑めたかもしれません。では、実際のところベジエ曲線<em>とは</em>いったい何でしょうか？これを説明する方法は2通りありますが、どちらの説明でも行き着く先はまったく同じです。一方は複雑な数学を使うのに対し、もう一方はとても簡単です。というわけで……簡単な説明の方から始めましょう。
          </p>
          <p>
            ベジエ曲線は、<a
              href="https://ja.wikipedia.org/wiki/%E7%B7%9A%E5%BD%A2%E8%A3%9C%E9%96%93"
              >線形補間</a
            >の結果です。というと難しそうに聞こえますが、誰でも幼い頃から線形補間をやってきています。例えば、何か2つのものの間を指し示すときには、いつも線形補間を行っています。線形補間とは、単純に「2点の間から点を得る」ことなのです。
          </p>
          <p>
            例えば、2点間の距離がわかっているとして、一方の点から距離の20%だけ離れた（すなわち、もう一方の点から80%離れた）新しい点を求めたい場合、次のようにとても簡単に計算できます。
          </p>
          <img
            className="LaTeX SVG"
            src="images/latex/4df088f01d0fd4de84a50bbc2e25f8a7.svg"
            width="216px"
            height="92px"
            loading="lazy"
          />
          <p>
            では、実際に見てみましょう。下の図はインタラクティブになっています。上下キーで補間の比率が増減しますので、どうなるか確かめてみましょう。最初に3点があり、それを結んで2本の直線が引かれています。この直線の上でそれぞれ線形補間を行うと、2つの点が得られます。この2点の間でさらに線形補間を行うと、1つの点を得ることができます。そして、あらゆる比率に対して同様に点を求め、それをすべて集めると、このようにベジエ曲線ができるのです。
          </p>
          <graphics-element
            title="Linear Interpolation leading to Bézier curves"
            width="825"
            height="275"
            src="./chapters/whatis/interpolation.js"
          >
            <fallback-image>
              <img
                width="825"
                height="275"
                src="./chapters/whatis/interpolation.png"
                loading="lazy"
              />
              Scripts are disabled. Showing fallback image.
            </fallback-image></graphics-element
          >

          <p>また、これが複雑な方の数学につながっていきます。微積分です。</p>
          <p>
            いま上で行ったものとは似つかないように思えますが、実はあれは2次曲線を描いていたのです。ただし一発で描きあげるのではなく、手順を追って描いていきました。ベジエ曲線は多項式関数で表現できますが、その一方で、とても単純な補間の補間の補間の……というふうにも説明できます。これがベジエ曲線のおもしろいところです。これはまた、ベジェ曲線は「本当の数学」で見る（関数を調べたり微分を調べたり、あらゆる方法で）ことも可能ですし、「機械的」な組み立て操作として見る（例えば、ベジエ曲線は組み立てに使う点の間からは決してはみ出ないということがわかります）ことも可能だということを意味しています。
          </p>
          <p>
            それでは、もう少し詳しくベジエ曲線を見ていきましょう。数学的な表現やそこから導かれる性質、さらには、ベジエ曲線に対して／ベジエ曲線を使ってできるさまざまな内容についてです。
          </p>
        </section>
      </section>
    </main>
  </body>
</html>
